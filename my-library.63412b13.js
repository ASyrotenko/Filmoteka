!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=i),i("469FY"),i("iGaYn"),i("l8AHb");var r=i("bpxeT"),c=i("2TvXO"),o=i("iGaYn"),s=i("3vKGz"),l=(r=i("bpxeT"),c=i("2TvXO"),i("8Mjv6")),d=(s=i("3vKGz"),new(0,l.FilmsApiService)),u=(0,s.getRefs)(),v="https://image.tmdb.org/t/p/original";function f(e){return e.map(m).join("")}function m(e){return p.apply(this,arguments)}function p(){return(p=e(r)(e(c).mark((function t(n){var a,i,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetchMovie(n);case 2:a=e.sent,i=h(a),r=_(a,i),u.filmGallery.insertAdjacentHTML("beforeend",r);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.poster_path,a=t.backdrop_path,i=null!==(e=null!=n?n:a)&&void 0!==e?e:"",r="".concat(v).concat(i);return r}function _(e,t){var n,a=e.original_name,i=e.original_title,r=e.genres,c=e.vote_average,o=e.release_date,s=e.id,l=null!==(n=null!=a?a:i)&&void 0!==n?n:"",d=r?r.map((function(e){return e.name})):"";return' <li   class="film__item">\n    \n        <a class="film__link"\n        href="#"\n        >\n          <img id=\''.concat(s,'\'\n            class="film__image"\n            ').concat(t?'\n        src="'.concat(t,'"\n        '):"src = ''",'\n                        alt="Movie: ').concat(l,'"\n            loading="lazy"\n          />\n        </a>\n      </div>\n      <div class="film__info">\n      <p class="film__info--text">Watch ').concat(l,' online</p>\n      </div>\n      <div class="film__content">\n        ').concat(l?'\n        <h3 class="film__film__title">\n          '.concat(l,"</h3>\n        "):""," ").concat(d?'\n        <p class="film__genres">'.concat(d.join(", "),"\n        </p>\n        "):""," \n        \n        ").concat(o?'\n        <p class="film__date">| '.concat(new Date(o).getFullYear(),"</p>\n        "):""," \n        ").concat(c?'\n        <p class="film__value">'.concat(c.toFixed(2),"</p>\n        "):"","\n   \n    </li>\n    ")}function b(e){u.insertImgCont.insertAdjacentHTML("beforeend",function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.original_title,a=t.poster_path,i=t.backdrop_path,r=null!==(e=null!=a?a:i)&&void 0!==e?e:"";return'\n             <img\n            class="movie__poster"\n            '.concat(r?'\n        src="'.concat(v).concat(r,'"\n        '):"src = ''",'\n                        alt="Movie: ').concat(null!=n?n:"",'"\n          />\n')}(e)),u.movieBox.insertAdjacentHTML("beforeend",function(e){var t,n=e.title,a=e.original_name,i=e.original_title,r=e.popularity,c=e.genres,o=e.vote_average,s=e.vote_count,l=e.overview,d=e.id,u=(e.video,null!==(t=null!=a?a:i)&&void 0!==t?t:""),v=c?c.map((function(e){return e.name})):"";return'\n  <div class="img-box"></div>\n  <div class="movie__id" id="'.concat(d,'" ><h2 class="movie-card__title">\n    ').concat(null!=n?n:u,'\n    </h2>\n  <div class="movie__info-container">\n<table class="movie-info__table">\n  <tr>\n    ').concat(s?'\n            <td class="movie__info-item">Vote / Votes</td>\n        ':"","\n    ").concat(s?'\n            <td class="movie__info-data"><span class="td-box">'.concat(o.toFixed(1),"</span> / ").concat(s,"</td>\n        "):"","\n    \n  </tr>\n  <tr>\n    ").concat(r?'\n            <td class="movie__info-item">Popularity</td>\n        ':"","\n    ").concat(r?'\n            <td class="movie__info-data">'.concat(r.toFixed(1),"</td>\n        "):"","\n  </tr>\n  <tr>\n     ").concat(u?'\n                <td class="movie__info-item">Original Title</td>\n        ':"","\n    ").concat(u?'\n                <td class="movie__info-data movie__info-data--title">'.concat(u,"</td>\n        "):"","\n  </tr>\n    <tr>\n    ").concat(v?'<td class="movie__info-item">Genre</td>':"","\n    ").concat(v?'<td class="movie__info-data">'.concat(v.join(", "),"</td>"):"","\n  </tr>\n</table>\n</div>\n").concat(l?'\n    <h3 class="movie__about">About</h3> ':"","\n").concat(l?'\n    <p class="movie__about-info">'.concat(l,"</p> "):"","\n</div>")}(e))}function g(e){return w.apply(this,arguments)}function w(){return(w=e(r)(e(c).mark((function t(n){var a,i,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.target.classList.contains("film__image")){e.next=3;break}return e.abrupt("return");case 3:return u.insertImgCont.innerHTML="",u.movieBox.innerHTML="",u.watchBtn.classList.remove("not-active"),e.next=8,d.fetchMovie(n.target.id);case 8:if(a=e.sent){e.next=11;break}return e.abrupt("return");case 11:return u.modalBackdrop.classList.remove("is-hidden"),window.addEventListener("keydown",L),document.querySelector("body").classList.add("modal-open"),b(a),i=document.querySelector(".movie__id"),r=i.id,e.next=19,d.fetchMovieVideo(r);case 19:x(e.sent);case 21:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function y(e){u.trailerOverlay.classList.remove("not-active"),u.modalBackdrop.classList.add("is-hidden"),window.removeEventListener("keydown",L),C(),document.querySelector("body").classList.remove("modal-open"),u.insertVideoCont.innerHTML=" ",u.addToWatched.textContent="add to watched",u.addToWatched.classList.remove("film-btn--active"),u.addToQueue.textContent="add to queue",u.addToQueue.classList.remove("film-btn--active")}function L(e){"Escape"===e.code&&y()}u.filmGallery.addEventListener("click",g),document.querySelector(".backdrop").addEventListener("click",(function(e){e.currentTarget===e.target&&y()})),u.filmGallery.addEventListener("click",g),u.modalCloseBtn.addEventListener("click",y);function x(e){var t,n=e.find((function(e){return null!==(t="Official Trailer"===e.name)&&void 0!==t?t:{}}));if(!n)return u.watchBtn.classList.add("not-active"),void u.trailerOverlay.classList.add("not-active");u.insertVideoCont.insertAdjacentHTML("beforeend",function(e){var t=e.key,n=e.site;return'<iframe class="iframe" width="100%" height="100%" src="https://www.'.concat(n,".com/embed/").concat(t,'?origin=https://asyrotenko.github.io" title="video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media;\n    gyroscope; picture-in-picture" allowfullscreen></iframe>')}(n))}function T(){return k.apply(this,arguments)}function k(){return(k=e(r)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.insertVideoCont.classList.add("is-active"),u.trailerBox.classList.add("is-active"),u.watchBtn.setAttribute("disabled"," "),u.closeVideoBtn.removeAttribute("disabled"),u.insertVideoCont.scrollIntoView();case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function C(){document.querySelectorAll("iframe").forEach((function(e){e.src=e.src})),document.querySelectorAll("video").forEach((function(e){e.pause()})),u.insertVideoCont.classList.remove("is-active"),u.trailerBox.classList.remove("is-active"),u.closeVideoBtn.setAttribute("disabled",""),u.watchBtn.removeAttribute("disabled")}u.trailerOverlay.addEventListener("click",T),u.closeVideoBtn.addEventListener("click",C),u.watchBtn.addEventListener("click",T);var q=(0,s.getRefs)(),M=new(0,o.Firebase);function B(){return E.apply(this,arguments)}function E(){return(E=e(r)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.queue.classList.remove("film-btn--active"),q.watched.classList.add("film-btn--active"),e.next=4,M.getDoc("watched");case 4:0===(n=e.sent).length?(q.filmGallery.innerHTML="",q.filmGallery.insertAdjacentHTML("beforeend",'<li class="film__list-error">\n      <p class="library__text">No watched movies found in the library</p>\n      <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No watched movies found in the library"/>\n    </li>')):(q.filmGallery.innerHTML="",f(n));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function G(){return(G=e(r)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.watched.classList.remove("film-btn--active"),q.queue.classList.add("film-btn--active"),e.next=4,M.getDoc("queue");case 4:0===(n=e.sent).length?(q.filmGallery.innerHTML="",q.filmGallery.insertAdjacentHTML("beforeend",'<li class="film__list-error">\n        <p class="library__text">No movies saved for viewing were found in the library</p>\n        <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No movies saved for viewing were found in the library"/>\n      </li>')):(q.filmGallery.innerHTML="",f(n));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}q.watched.addEventListener("click",B),q.queue.addEventListener("click",(function(){return G.apply(this,arguments)}));var A=setInterval((function(e){try{q.watched.classList.add("film-btn--active"),M.userStatus(),B(),clearInterval(A)}catch(e){console.log("error")}}),250);r=i("bpxeT"),c=i("2TvXO"),o=i("iGaYn");var H=(0,(s=i("3vKGz")).getRefs)(),j=new(0,o.Firebase);function F(){return(F=e(r)(e(c).mark((function t(n){var a,i,r,o,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="remove from watched",e.next=3,j.getDoc("watched");case 3:return i=e.sent,r=Object.values(i),r.includes(n.target.id)&&(H.addToWatched.textContent=a,H.addToWatched.classList.add("film-btn--active")),o="remove from queue",e.next=10,j.getDoc("queue");case 10:s=e.sent,l=Object.values(s),l.includes(n.target.id)&&(H.addToQueue.textContent=o,H.addToQueue.classList.add("film-btn--active"));case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}H.addToWatched.addEventListener("click",(function(e){var t="add to watched",n="remove from watched";console.log(j.setDoc.userId),e.target.textContent.includes(t)?(e.target.textContent=n,j.setDoc("watched"),j.removeFilmById("queue"),H.addToQueue.textContent="add to queue",H.addToQueue.classList.remove("film-btn--active")):e.target.textContent.includes(n)&&(e.target.textContent=t,j.removeFilmById("watched"),H.addToWatched.classList.remove("film-btn--active"))})),H.addToQueue.addEventListener("click",(function(e){var t="add to queue",n="remove from queue";e.target.textContent.includes(t)?(e.target.textContent=n,j.setDoc("queue"),j.removeFilmById("watched"),H.addToWatched.textContent="add to watched",H.addToWatched.classList.remove("film-btn--active")):e.target.textContent.includes(n)&&(e.target.textContent=t,j.removeFilmById("queue"),H.addToQueue.classList.remove("film-btn--active"))})),H.filmGallery.addEventListener("click",(function(e){return F.apply(this,arguments)})),i("3diZ0"),i("aZhHc")}();
//# sourceMappingURL=my-library.63412b13.js.map
