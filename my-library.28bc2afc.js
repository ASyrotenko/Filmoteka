!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){i[t]=e},e.parcelRequired7c6=a),a("469FY"),a("iGaYn"),a("l8AHb");var r=a("bpxeT"),c=a("2TvXO"),o=a("iGaYn"),s=a("3vKGz"),l=(r=a("bpxeT"),c=a("2TvXO"),a("8Mjv6")),d=(s=a("3vKGz"),new(0,l.FilmsApiService)),u=(0,s.getRefs)();function m(t){return t.map(f).join("")}function f(t){return v.apply(this,arguments)}function v(){return(v=t(r)(t(c).mark((function e(n){var i,a;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.fetchMovie(n);case 2:i=t.sent,a=p(i),u.filmGallery.insertAdjacentHTML("beforeend",a);case 5:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function p(t){var e,n=t.original_name,i=t.original_title,a=t.genres,r=t.vote_average,c=t.vote_count,o=t.release_date,s=t.poster_path,l=t.id,d=null!==(e=null!=n?n:i)&&void 0!==e?e:"",u=a?a.map((function(t){return t.name})):"";return' <li   class="film__item">\n    \n        <a class="film__link"\n        href="#"\n        >\n     <img\n  id="'.concat(l,'"\n  data-imgpath=').concat(s,'\n  class="film__image"\n  ').concat(s?'\n  srcset="\n  https://image.tmdb.org/t/p/w500/'.concat(s,"      500w,\n  https://image.tmdb.org/t/p/w780/").concat(s,"      780w,\n  https://image.tmdb.org/t/p/w1280/").concat(s,"    1280w,\n  https://image.tmdb.org/t/p/w300/").concat(s,"      300w,\n    https://image.tmdb.org/t/p/original/").concat(s,' 2000w\n  "\n  src="https://image.tmdb.org/t/p/w300/').concat(s,'"\n  sizes="(min-width:1200px) 33vw, (min-width:768px) 50vw, 100vw"\n\n  '):'src="https://upload.wikimedia.org/wikipedia/commons/f/f9/No-image-available.jpg"\n  ','\n  alt="Movie: ').concat(d,'"\n/>\n        </a>\n      </div>\n      <div class="film__info">\n          <div class="aver-rate">\n            <p class="film__info--text"> Average rate ').concat(r.toFixed(1),' </p>\n          </div>\n          <div class="votes-amount">\n            <p class="film__info--text"> Votes ').concat(c,'</p>\n          </div>\n        </div>\n      <div class="film__content">\n        ').concat(d?'\n        <h3 class="film__film__title">\n          '.concat(d,"</h3>\n        "):""," ").concat(u?'\n        <p class="film__genres">'.concat(u.join(", "),"\n        </p>\n        "):""," \n        \n        ").concat(o?'\n        <p class="film__date">| '.concat(new Date(o).getFullYear(),"</p>\n        "):""," \n        ").concat(r?'\n        <p class="film__value">'.concat(r.toFixed(2),"</p>\n        "):"","\n   \n    </li>\n    ")}function h(t,e){u.insertImgCont.insertAdjacentHTML("beforeend",function(t){return'\n<img\n  class="movie__poster"\n  '.concat(t?'\n  srcset="\n    https://image.tmdb.org/t/p/w300/'.concat(t,"      300w,\n    https://image.tmdb.org/t/p/w500/").concat(t,"      500w,\n    https://image.tmdb.org/t/p/w780/").concat(t,"      780w,\n    https://image.tmdb.org/t/p/w1280/").concat(t,"    1280w,\n    https://image.tmdb.org/t/p/original/").concat(t,' 2000w\n  "\n  src="https://image.tmdb.org/t/p/w300/').concat(t,'"\n  sizes="(min-width:1200px) 33vw, (min-width:768px) 50vw, 100vw"\n\n  '):'src="https://upload.wikimedia.org/wikipedia/commons/f/f9/No-image-available.jpg"\n  ','\n  alt="Movie title"\n/>\n')}(e)),u.movieBox.insertAdjacentHTML("beforeend",function(t){var e,n=t.title,i=t.original_name,a=t.original_title,r=t.popularity,c=t.genres,o=t.vote_average,s=t.vote_count,l=t.overview,d=t.id,u=null!==(e=null!=i?i:a)&&void 0!==e?e:"",m=c?c.map((function(t){return t.name})):"";return'\n  <div class="movie__id" id="'.concat(d,'" ><h2 class="movie-card__title">\n    ').concat(null!=n?n:u,'\n    </h2>\n  <div class="movie__info-container">\n<table class="movie-info__table">\n  <tr>\n    ').concat(s?'\n            <td class="movie__info-item">Vote / Votes</td>\n        ':"","\n    ").concat(s?'\n            <td class="movie__info-data"><span class="td-box">'.concat(o.toFixed(1),"</span> / ").concat(s,"</td>\n        "):"","\n    \n  </tr>\n  <tr>\n    ").concat(r?'\n            <td class="movie__info-item">Popularity</td>\n        ':"","\n    ").concat(r?'\n            <td class="movie__info-data">'.concat(r.toFixed(1),"</td>\n        "):"","\n  </tr>\n  <tr>\n     ").concat(u?'\n                <td class="movie__info-item">Original Title</td>\n        ':"","\n    ").concat(u?'\n                <td class="movie__info-data movie__info-data--title">'.concat(u,"</td>\n        "):"","\n  </tr>\n    <tr>\n    ").concat(m?'<td class="movie__info-item">Genre</td>':"","\n    ").concat(m?'<td class="movie__info-data">'.concat(m.join(", "),"</td>"):"","\n  </tr>\n</table>\n</div>\n").concat(l?'\n    <h3 class="movie__about">About</h3> ':"","\n").concat(l?'\n    <p class="movie__about-info">'.concat(l,"</p> "):"","\n</div>")}(t)),document.querySelector(".spinner").style.display="none"}function w(t){return _.apply(this,arguments)}function _(){return(_=t(r)(t(c).mark((function e(n){var i,a,r,o;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),n.target.classList.contains("film__image")){t.next=3;break}return t.abrupt("return");case 3:return u.insertImgCont.innerHTML="",u.movieBox.innerHTML="",u.watchBtn.classList.remove("not-active"),t.next=8,d.fetchMovie(n.target.id);case 8:if(i=t.sent){t.next=11;break}return t.abrupt("return");case 11:return u.modalBackdrop.classList.remove("is-hidden"),window.addEventListener("keydown",b),document.querySelector("body").classList.add("modal-open"),a=n.target.dataset.imgpath,h(i,a),r=document.querySelector(".movie__id"),o=r.id,t.next=20,d.fetchMovieVideo(o);case 20:y(t.sent);case 22:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function g(t){u.trailerOverlay.classList.remove("not-active"),u.modalBackdrop.classList.add("is-hidden"),window.removeEventListener("keydown",b),k(),document.querySelector("body").classList.remove("modal-open"),u.insertVideoCont.innerHTML=" ",u.addToWatched.textContent="add to watched",u.addToWatched.classList.remove("film-btn--active"),u.addToQueue.textContent="add to queue",u.addToQueue.classList.remove("film-btn--active"),u.queue.classList.contains("film-btn--active")?u.queue.click():u.watched.click()}function b(t){"Escape"===t.code&&g()}u.filmGallery.addEventListener("click",w),document.querySelector(".backdrop").addEventListener("click",(function(t){t.currentTarget===t.target&&g()})),u.filmGallery.addEventListener("click",w),u.modalCloseBtn.addEventListener("click",g);function y(t){var e,n=t.find((function(t){return null!==(e="Official Trailer"===t.name)&&void 0!==e?e:{}}));if(!n)return u.watchBtn.classList.add("not-active"),void u.trailerOverlay.classList.add("not-active");u.insertVideoCont.insertAdjacentHTML("beforeend",function(t){var e=t.key,n=t.site;return'<iframe class="iframe" width="100%" height="100%" src="https://www.'.concat(n,".com/embed/").concat(e,'?origin=https://asyrotenko.github.io" title="video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media;\n    gyroscope; picture-in-picture" allowfullscreen></iframe>')}(n))}function L(){return x.apply(this,arguments)}function x(){return(x=t(r)(t(c).mark((function e(){return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.insertVideoCont.classList.add("is-active"),u.trailerBox.classList.add("is-active"),u.watchBtn.setAttribute("disabled"," "),u.closeVideoBtn.removeAttribute("disabled"),u.insertVideoCont.scrollIntoView();case 5:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function k(){document.querySelectorAll("iframe").forEach((function(t){t.src=t.src})),document.querySelectorAll("video").forEach((function(t){t.pause()})),u.insertVideoCont.classList.remove("is-active"),u.trailerBox.classList.remove("is-active"),u.closeVideoBtn.setAttribute("disabled",""),u.watchBtn.removeAttribute("disabled")}u.trailerOverlay.addEventListener("click",L),u.closeVideoBtn.addEventListener("click",k),u.watchBtn.addEventListener("click",L);var T=(0,s.getRefs)(),M=new(0,o.Firebase);function q(){return A.apply(this,arguments)}function A(){return(A=t(r)(t(c).mark((function e(){var n;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T.queue.classList.remove("film-btn--active"),T.watched.classList.add("film-btn--active"),t.next=4,M.getDoc("watched");case 4:0===(n=t.sent).length?(T.filmGallery.innerHTML="",T.filmGallery.insertAdjacentHTML("beforeend",'<li class="film__list-error">\n      <p class="library__text">No watched movies found in the library</p>\n      <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No watched movies found in the library"/>\n    </li>')):(T.filmGallery.innerHTML="",m(n));case 6:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=t(r)(t(c).mark((function e(){var n;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T.watched.classList.remove("film-btn--active"),T.queue.classList.add("film-btn--active"),t.next=4,M.getDoc("queue");case 4:0===(n=t.sent).length?(T.filmGallery.innerHTML="",document.querySelector(".footer").classList.add("footer--empty-library"),T.filmGallery.insertAdjacentHTML("beforeend",'<li class="film__list-error">\n        <p class="library__text">No movies saved for viewing were found in the library</p>\n        <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No movies saved for viewing were found in the library"/>\n      </li>')):(T.filmGallery.innerHTML="",m(n));case 6:case"end":return t.stop()}}),e)})))).apply(this,arguments)}T.watched.addEventListener("click",q),T.queue.addEventListener("click",(function(){return E.apply(this,arguments)}));var B=setInterval((function(t){try{T.watched.classList.add("film-btn--active"),M.userStatus(),q(),clearInterval(B)}catch(t){console.log("error")}}),250);a("3diZ0"),a("aZhHc")}();
//# sourceMappingURL=my-library.28bc2afc.js.map
