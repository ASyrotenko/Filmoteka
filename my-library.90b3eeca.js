!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequired7c6=a),a("469FY"),a("iGaYn"),a("l8AHb");var r=a("bpxeT"),c=a("2TvXO"),s=a("iGaYn"),o=a("3vKGz"),l=(r=a("bpxeT"),c=a("2TvXO"),a("8Mjv6")),d=(o=a("3vKGz"),a("94krt")),u=(0,o.getRefs)(),f=new(0,l.FilmsApiService);function m(e){return p.apply(this,arguments)}function p(){return(p=e(r)(e(c).mark((function t(n){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(v));case 2:i=e.sent.join(""),u.filmGallery.insertAdjacentHTML("beforeend",i),document.querySelectorAll(".film__item").forEach((function(e){return e.addEventListener("click",d.onMovieCardClick)}));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return(h=e(r)(e(c).mark((function t(n){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.fetchMovie(n);case 2:return i=e.sent,a=w(i),e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function w(e){var t,n,i,a=e.title,r=e.name,c=e.original_name,s=e.original_title,o=e.genres,l=e.vote_average,d=e.vote_count,u=e.release_date,f=e.poster_path,m=e.id,p=null!==(i=null!==(n=null!==(t=null!=a?a:r)&&void 0!==t?t:c)&&void 0!==n?n:s)&&void 0!==i?i:"",v=o?o.slice(0,2).map((function(e){return e.name})):"";return o&&o.length>2&&v.push("Other"),' <li class="film__item" data-itemId="'.concat(m,'" data-imgpath="').concat(f,'">\n    \n        <a class="film__link"\n        href="#"\n        >\n     <img\n  id="').concat(m,'"\n  data-imgpath=').concat(f,'\n  class="film__image"\n  ').concat(f?'\n  srcset="\n  https://image.tmdb.org/t/p/w500/'.concat(f,"      500w,\n  https://image.tmdb.org/t/p/w780/").concat(f,"      780w,\n  https://image.tmdb.org/t/p/w1280/").concat(f,"    1280w,\n  https://image.tmdb.org/t/p/w300/").concat(f,"      300w,\n    https://image.tmdb.org/t/p/original/").concat(f,' 2000w\n  "\n  src="https://image.tmdb.org/t/p/w300/').concat(f,'"\n  sizes="(min-width:1200px) 33vw, (min-width:768px) 50vw, 100vw"\n\n  '):'src="https://upload.wikimedia.org/wikipedia/commons/f/f9/No-image-available.jpg"\n  ','\n  alt="Movie: ').concat(p,'"\n/>\n        </a>\n      </div>\n      <div class="film__info">\n          <div class="aver-rate">\n            <p class="film__info--text"> Average rate ').concat(l.toFixed(1),' </p>\n          </div>\n          <div class="votes-amount">\n            <p class="film__info--text"> Votes ').concat(d,'</p>\n          </div>\n        </div>\n      <div class="film__content">\n        ').concat(p?'\n        <h3 class="film__film__title">\n          '.concat(p,"</h3>\n        "):"",'\n      <div class="film__wrap">\n      ').concat(v?'\n        <p class="film__genres">'.concat(v.join(", "),"\n        </p>\n        "):""," \n        \n        ").concat(u?'\n        <p class="film__date">| '.concat(new Date(u).getFullYear(),"</p>\n        "):""," \n        ").concat(l?'\n        <p class="film__value">'.concat(l.toFixed(2),"</p>\n        "):"","\n        </div>\n   </div>\n    </li>\n    ")}function g(e){u.trailerOverlay.classList.remove("not-active"),u.modalBackdrop.classList.add("is-hidden"),window.removeEventListener("keydown",b),L(),document.querySelector("body").classList.remove("modal-open"),u.insertVideoCont.innerHTML=" ",u.addToWatched.textContent="add to watched",u.addToWatched.classList.remove("film-btn--active"),u.addToQueue.textContent="add to queue",u.addToQueue.classList.remove("film-btn--active"),u.queue.classList.contains("film-btn--active")?u.queue.click():u.watched.click()}function b(e){"Escape"===e.code&&g()}document.querySelector(".backdrop").addEventListener("click",(function(e){e.currentTarget===e.target&&g()})),u.modalCloseBtn.addEventListener("click",g);function _(){return y.apply(this,arguments)}function y(){return(y=e(r)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.insertVideoCont.classList.add("is-active"),u.trailerBox.classList.add("is-active"),u.watchBtn.setAttribute("disabled"," "),u.closeVideoBtn.removeAttribute("disabled"),u.insertVideoCont.scrollIntoView();case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function L(){document.querySelectorAll("iframe").forEach((function(e){e.src=e.src})),document.querySelectorAll("video").forEach((function(e){e.pause()})),u.insertVideoCont.classList.remove("is-active"),u.trailerBox.classList.remove("is-active"),u.closeVideoBtn.setAttribute("disabled",""),u.watchBtn.removeAttribute("disabled")}u.trailerOverlay.addEventListener("click",_),u.closeVideoBtn.addEventListener("click",L),u.watchBtn.addEventListener("click",_);var x=(0,o.getRefs)(),k=new(0,s.Firebase);function T(){return q.apply(this,arguments)}function q(){return(q=e(r)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.queue.classList.remove("film-btn--active"),x.watched.classList.add("film-btn--active"),e.next=4,k.getDoc("watched");case 4:0===(n=e.sent).length?(document.querySelector(".spinner").classList.add("hidden"),x.filmGallery.innerHTML="",x.filmGallery.insertAdjacentHTML("beforeend",'<li class="film-list-error">\n      <p class="library__text">No watched movies found in the library</p>\n      <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No watched movies found in the library"/>\n    </li>')):(x.filmGallery.innerHTML="",m(n),document.querySelector(".spinner").classList.add("hidden"));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=e(r)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.watched.classList.remove("film-btn--active"),x.queue.classList.add("film-btn--active"),document.querySelector(".spinner").classList.add("hidden"),e.next=5,k.getDoc("queue");case 5:0===(n=e.sent).length?(x.filmGallery.innerHTML="",document.querySelector(".footer").classList.add("footer--empty-library"),x.filmGallery.insertAdjacentHTML("beforeend",'<li class="film-list-error">\n        <p class="library__text">No movies saved for viewing were found in the library</p>\n        <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No movies saved for viewing were found in the library"/>\n      </li>')):(x.filmGallery.innerHTML="",m(n));case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}x.watched.addEventListener("click",T),x.queue.addEventListener("click",(function(){return E.apply(this,arguments)}));var M=setInterval((function(e){try{x.watched.classList.add("film-btn--active"),k.userStatus(),T(),clearInterval(M)}catch(e){console.log("error")}}),250);a("3diZ0"),a("aZhHc"),a("gNnxf")}();
//# sourceMappingURL=my-library.90b3eeca.js.map
