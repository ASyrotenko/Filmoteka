var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},e.parcelRequired7c6=n),n("bWo2c"),n("fzYh0"),n("la0xx");var a=n("fzYh0"),s=n("lpPzL"),l=n("cQLOM"),r=(s=n("lpPzL"),n("03v4M"));const c=(0,s.getRefs)(),o=new(0,l.FilmsApiService);async function d(e){const t=(await Promise.all(e.map(m))).join("");c.filmGallery.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".film__item").forEach((e=>e.addEventListener("click",r.onMovieCardClick)))}async function m(e){const t=function(e){const{title:t,name:i,original_name:n,original_title:a,genres:s,vote_average:l,vote_count:r,release_date:c,poster_path:o,id:d}=e,m=t??i??n??a??"",f=s?s.slice(0,2).map((e=>e.name)):"";s&&s.length>2&&f.push("Other");return` <li class="film__item" data-itemId="${d}" data-imgpath="${o}">\n    \n        <a class="film__link"\n        href="#"\n        >\n     <img\n  id="${d}"\n  data-imgpath=${o}\n  class="film__image"\n  ${o?`\n  srcset="\n  https://image.tmdb.org/t/p/w500/${o}      500w,\n  https://image.tmdb.org/t/p/w780/${o}      780w,\n  https://image.tmdb.org/t/p/w1280/${o}    1280w,\n  https://image.tmdb.org/t/p/w300/${o}      300w,\n    https://image.tmdb.org/t/p/original/${o} 2000w\n  "\n  src="https://image.tmdb.org/t/p/w300/${o}"\n  sizes="(min-width:1200px) 33vw, (min-width:768px) 50vw, 100vw"\n\n  `:'src="https://upload.wikimedia.org/wikipedia/commons/f/f9/No-image-available.jpg"\n  '}\n  alt="Movie: ${m}"\n/>\n        </a>\n      </div>\n      <div class="film__info">\n          <div class="aver-rate">\n            <p class="film__info--text"> Average rate ${l.toFixed(1)} </p>\n          </div>\n          <div class="votes-amount">\n            <p class="film__info--text"> Votes ${r}</p>\n          </div>\n        </div>\n      <div class="film__content">\n        ${m?`\n        <h3 class="film__film__title">\n          ${m}</h3>\n        `:""}\n      <div class="film__wrap">\n      ${f?`\n        <p class="film__genres">${f.join(", ")}\n        </p>\n        `:""} \n        \n        ${c?`\n        <p class="film__date">| ${new Date(c).getFullYear()}</p>\n        `:""} \n        ${l?`\n        <p class="film__value">${l.toFixed(2)}</p>\n        `:""}\n        </div>\n   </div>\n    </li>\n    `}(await o.fetchMovie(e));return t}function f(e){c.trailerOverlay.classList.remove("not-active"),c.modalBackdrop.classList.add("is-hidden"),window.removeEventListener("keydown",u),p(),document.querySelector("body").classList.remove("modal-open"),c.insertVideoCont.innerHTML=" ",c.addToWatched.textContent="add to watched",c.addToWatched.classList.remove("film-btn--active"),c.addToQueue.textContent="add to queue",c.addToQueue.classList.remove("film-btn--active"),c.queue.classList.contains("film-btn--active")?c.queue.click():c.watched.click()}function u(e){"Escape"===e.code&&f()}document.querySelector(".backdrop").addEventListener("click",(function(e){e.currentTarget===e.target&&f()})),c.modalCloseBtn.addEventListener("click",f);async function v(){c.insertVideoCont.classList.add("is-active"),c.trailerBox.classList.add("is-active"),c.watchBtn.setAttribute("disabled"," "),c.closeVideoBtn.removeAttribute("disabled"),c.insertVideoCont.scrollIntoView()}function p(){document.querySelectorAll("iframe").forEach((e=>{e.src=e.src})),document.querySelectorAll("video").forEach((e=>{e.pause()})),c.insertVideoCont.classList.remove("is-active"),c.trailerBox.classList.remove("is-active"),c.closeVideoBtn.setAttribute("disabled",""),c.watchBtn.removeAttribute("disabled")}c.trailerOverlay.addEventListener("click",v),c.closeVideoBtn.addEventListener("click",p),c.watchBtn.addEventListener("click",v);const h=(0,s.getRefs)(),w=new(0,a.Firebase);async function g(){h.queue.classList.remove("film-btn--active"),h.watched.classList.add("film-btn--active");let e=await w.getDoc("watched");0===e.length?(document.querySelector(".spinner").classList.add("hidden"),h.filmGallery.innerHTML="",h.filmGallery.insertAdjacentHTML("beforeend",'<li class="film-list-error">\n      <p class="library__text">No watched movies found in the library</p>\n      <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No watched movies found in the library"/>\n    </li>')):(h.filmGallery.innerHTML="",d(e),document.querySelector(".spinner").classList.add("hidden"))}h.watched.addEventListener("click",g),h.queue.addEventListener("click",(async function(){h.watched.classList.remove("film-btn--active"),h.queue.classList.add("film-btn--active"),document.querySelector(".spinner").classList.add("hidden");let e=await w.getDoc("queue");0===e.length?(h.filmGallery.innerHTML="",document.querySelector(".footer").classList.add("footer--empty-library"),h.filmGallery.insertAdjacentHTML("beforeend",'<li class="film-list-error">\n        <p class="library__text">No movies saved for viewing were found in the library</p>\n        <img src="https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png" alt="No movies saved for viewing were found in the library"/>\n      </li>')):(h.filmGallery.innerHTML="",d(e))}));const b=setInterval((function(e){try{h.watched.classList.add("film-btn--active"),w.userStatus(),g(),clearInterval(b)}catch(e){}}),250);n("97fqm"),n("7bYU0"),n("au048");
//# sourceMappingURL=my-library.43b3b4de.js.map
