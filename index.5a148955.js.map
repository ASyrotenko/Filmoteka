{"mappings":"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","sources":["src/index.js","src/js/addvideo.js","src/js/movie-card.js","src/js/search-movie.js","src/js/films-gallery.js","src/js/get-genres.js","src/js/backToTop.js"],"sourcesContent":["import './js/modal-team';\nimport './js/addvideo';\nimport './js/firebase-auth';\nimport './js/firebase-db-index';\nimport './js/firebase-class';\nimport './js/movie-card';\nimport './js/search-movie';\nimport './js/change-color-scheme.js';\nimport './js/library-auth';\nimport './js/backToTop';\n// import './js/pagination';\n\nimport { FilmsApiService } from './js/films-service';\nimport { filmTpl } from './js/films-gallery';\nimport { getRefs } from './js/get-refs';\nimport { combineGenres } from './js/get-genres';\n// import { pagination } from './js/pagination';\nconst refs = getRefs();\n\nfunction renderFilmGallery(films, genres) {\n  refs.filmGallery.insertAdjacentHTML('beforeend', filmTpl(films, genres));\n  //remove spinner\n  document.querySelector('.spinner').style.display = 'none';\n}\n\nexport const filmsApiService = new FilmsApiService();\nasync function load() {\n  const genres = await combineGenres();\n  const filmsTrending = await filmsApiService.fetchFilmsTrending();\n  renderFilmGallery(filmsTrending, genres);\n}\nload();\n","import { getRefs } from './get-refs';\nconst refs = getRefs();\nimport { filmsApiService } from '../index';\n\nconst stopVideos = () => {\n  document.querySelectorAll('iframe').forEach(v => {\n    v.src = v.src;\n  });\n  document.querySelectorAll('video').forEach(v => {\n    v.pause();\n  });\n};\n\nrefs.trailerOverlay.addEventListener('click', showVideo);\nrefs.closeVideoBtn.addEventListener('click', closeVideo);\nrefs.watchBtn.addEventListener('click', showVideo);\n\nfunction videoTpl(trailer) {\n  const { key, site } = trailer;\n\n  return `<iframe class=\"iframe\" width=\"100%\" height=\"100%\" src=\"https://www.${site}.com/embed/${key}?origin=https://asyrotenko.github.io\" title=\"video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media;\n    gyroscope; picture-in-picture\" allowfullscreen></iframe>`;\n}\n\nexport function renderVideoBox(videos) {\n  const trailer = videos.find(video => video.name === 'Official Trailer' ?? {});\n  if (!trailer) {\n    refs.watchBtn.classList.add('not-active');\n    refs.trailerOverlay.classList.add('not-active');\n    return;\n  }\n  refs.insertVideoCont.insertAdjacentHTML('beforeend', videoTpl(trailer));\n}\n\nexport async function showVideo() {\n  refs.insertVideoCont.classList.add('is-active');\n  refs.trailerBox.classList.add('is-active');\n  refs.watchBtn.setAttribute('disabled', ' ');\n  refs.closeVideoBtn.removeAttribute('disabled');\n  refs.insertVideoCont.scrollIntoView();\n}\n\nexport function closeVideo() {\n  stopVideos();\n  refs.insertVideoCont.classList.remove('is-active');\n  refs.trailerBox.classList.remove('is-active');\n  refs.closeVideoBtn.setAttribute('disabled', '');\n  refs.watchBtn.removeAttribute('disabled');\n}\n","// const posterUrl = 'https://www.themoviedb.org/t/p/w220_and_h330_face';\nconst posterLargeUrl = 'https://image.tmdb.org/t/p/original';\n// const posterLargeUrl = 'https://www.themoviedb.org/t/p/w600_and_h900_bestv2';\nimport { filmsApiService } from '../index';\nimport { getRefs } from './get-refs';\nimport { closeVideo, renderVideoBox } from './addvideo';\n\nconst refs = getRefs();\n\nconst backdrop = document.querySelector('.backdrop');\nbackdrop.addEventListener('click', backdropClick);\n\nexport function renderMovieCard(movie) {\n  refs.insertImgCont.insertAdjacentHTML('beforeend', getPosterForCard(movie));\n  refs.movieBox.insertAdjacentHTML('beforeend', movieCardTpl(movie));\n  document.querySelector('.spinner').style.display = 'none';\n}\nexport function movieCardTpl(movie) {\n  const {\n    title,\n    original_name,\n    original_title,\n    popularity,\n    genres,\n    vote_average,\n    vote_count,\n    overview,\n    id,\n    video,\n  } = movie;\n\n  const movieTitle = original_name ?? original_title ?? '';\n  const movieGenres = genres ? genres.map(genre => genre.name) : '';\n\n  return `\n  <div class=\"img-box\"></div>\n  <div class=\"movie__id\" id=\"${id}\" ><h2 class=\"movie-card__title\">\n    ${title ?? movieTitle}\n    </h2>\n  <div class=\"movie__info-container\">\n<table class=\"movie-info__table\">\n  <tr>\n    ${\n      vote_count\n        ? `\n            <td class=\"movie__info-item\">Vote / Votes</td>\n        `\n        : ''\n    }\n    ${\n      vote_count\n        ? `\n            <td class=\"movie__info-data\"><span class=\"td-box\">${vote_average.toFixed(\n              1\n            )}</span> / ${vote_count}</td>\n        `\n        : ''\n    }\n    \n  </tr>\n  <tr>\n    ${\n      popularity\n        ? `\n            <td class=\"movie__info-item\">Popularity</td>\n        `\n        : ''\n    }\n    ${\n      popularity\n        ? `\n            <td class=\"movie__info-data\">${popularity.toFixed(1)}</td>\n        `\n        : ''\n    }\n  </tr>\n  <tr>\n     ${\n       movieTitle\n         ? `\n                <td class=\"movie__info-item\">Original Title</td>\n        `\n         : ''\n     }\n    ${\n      movieTitle\n        ? `\n                <td class=\"movie__info-data movie__info-data--title\">${movieTitle}</td>\n        `\n        : ''\n    }\n  </tr>\n    <tr>\n    ${movieGenres ? `<td class=\"movie__info-item\">Genre</td>` : ''}\n    ${\n      movieGenres\n        ? `<td class=\"movie__info-data\">${movieGenres.join(', ')}</td>`\n        : ''\n    }\n  </tr>\n</table>\n</div>\n${\n  overview\n    ? `\n    <h3 class=\"movie__about\">About</h3> `\n    : ''\n}\n${\n  overview\n    ? `\n    <p class=\"movie__about-info\">${overview}</p> `\n    : ''\n}\n</div>`;\n}\n\nexport function getPosterForCard({\n  original_title,\n  poster_path,\n  backdrop_path,\n} = {}) {\n  const moviePoster = poster_path ?? backdrop_path ?? '';\n  return `\n             <img\n            class=\"movie__poster\"\n            ${\n              moviePoster\n                ? `\n        src=\"${posterLargeUrl}${moviePoster}\"\n        `\n                : `src = ''`\n            }\n                        alt=\"Movie: ${original_title ?? ''}\"\n          />\n`;\n}\n\nrefs.filmGallery.addEventListener('click', onMovieCardClick);\n\nasync function onMovieCardClick(e) {\n  e.preventDefault();\n\n  if (!e.target.classList.contains('film__image')) {\n    return;\n  }\n\n  refs.insertImgCont.innerHTML = '';\n  refs.movieBox.innerHTML = '';\n  refs.watchBtn.classList.remove('not-active');\n\n  const movieCard = await filmsApiService.fetchMovie(e.target.id);\n  if (!movieCard) {\n    return;\n    // Вивести повідомлення про помилку!!!!\n  }\n\n  refs.modalBackdrop.classList.remove('is-hidden');\n  window.addEventListener('keydown', onEscPress);\n  document.querySelector('body').classList.add('modal-open');\n  renderMovieCard(movieCard);\n  const movieCardIdRef = document.querySelector('.movie__id');\n  const movieId = movieCardIdRef.id;\n  const videos = await filmsApiService.fetchMovieVideo(movieId);\n  renderVideoBox(videos);\n}\n\nrefs.modalCloseBtn.addEventListener('click', onMovieModalClose);\n\nfunction onMovieModalClose(e) {\n  refs.trailerOverlay.classList.remove('not-active');\n\n  refs.modalBackdrop.classList.add('is-hidden');\n  window.removeEventListener('keydown', onEscPress);\n  closeVideo();\n  document.querySelector('body').classList.remove('modal-open');\n  refs.insertVideoCont.innerHTML = ' ';\n\n  refs.addToWatched.textContent = 'add to watched';\n  refs.addToWatched.classList.remove('film-btn--active');\n  refs.addToQueue.textContent = 'add to queue';\n  refs.addToQueue.classList.remove('film-btn--active');\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    onMovieModalClose();\n  }\n}\n\nfunction backdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onMovieModalClose();\n  }\n}\n","import { getRefs } from './get-refs';\nimport { FilmsApiService } from './films-service';\nimport { filmTpl } from './films-gallery';\nimport { combineGenres } from './get-genres';\n\nconst refs = getRefs();\n\nconst filmsApiService = new FilmsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  const form = e.target;\n  filmsApiService.query = e.target.elements.search.value.trim();\n\n  if (filmsApiService.query === '') {\n    onError();\n    return;\n  }\n  const genres = await combineGenres();\n  const filmOnSearch = await filmsApiService.fetchFilmsOnSearch(\n    filmsApiService.query\n  );\n  clearGalleryContainer();\n  renderFilmGallery(filmOnSearch, genres);\n  form.reset();\n}\n\nfunction onError() {\n  alert('Please type something');\n  console.log('ERROR');\n}\n\nfunction renderFilmGallery(films, genres) {\n  refs.filmGallery.insertAdjacentHTML('beforeend', filmTpl(films, genres));\n}\n\nfunction clearGalleryContainer() {\n  refs.filmGallery.innerHTML = '';\n}\n","import { movieCardTpl } from \"./movie-card\";\n\nconst posterUrl = 'https://www.themoviedb.org/t/p/w220_and_h330_face';\nconst posterLargeUrl = 'https://image.tmdb.org/t/p/original';\n// const posterLargeUrl = 'https://www.themoviedb.org/t/p/w600_and_h900_bestv2';\n// import { filmsApiService } from '../index';\n//image.tmdb.org/t/p/w500/kqjL17yufvn9OVLyXYpvtyrFfak.jpg\n\nexport function filmTpl({ results }, genresDict) {\n  return results\n    .map(\n      ({\n        original_name,\n        original_title,\n        release_date,\n        first_air_date,\n        genre_ids,\n        vote_count,\n        vote_average,\n        poster_path: poster,\n        id,\n      }) => {\n        const filmTitle = original_name ?? original_title ?? '';\n        const filmDate = release_date ?? first_air_date ?? '';\n         \n        return ` <li   class=\"film__item\">\n    \n        <a class=\"film__link\"\n        href=\"#\"\n        >\n          <img id='${id}'\n            class=\"film__image\"\n            ${\n              poster\n                ? `\n        src=\"${posterLargeUrl}${poster}\"\n        `\n                : `src = 'https://upload.wikimedia.org/wikipedia/commons/f/f9/No-image-available.jpg'`\n            }\n                        alt=\"Movie: ${filmTitle}\"\n          />\n        </a>\n        <div class=\"film__info\">\n          <div class=\"aver-rate\">\n            <p class=\"film__info--text\"> Average rate ${vote_average.toFixed(1)} </p>\n          </div>\n          <div class=\"votes-amount\">\n            <p class=\"film__info--text\"> Votes ${vote_count}</p>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"film__content\">\n        ${\n          filmTitle\n            ? `\n        <h3 class=\"film__film__title\">\n          ${filmTitle}</h3>\n        `\n            : ''\n        } ${\n          genre_ids\n            ? `\n        <p class=\"film__genres\">${genre_ids\n          .map(id => genresDict[id])\n          .join(', ')}\n        </p>\n        `\n            : ''\n        } \n\n        ${\n          filmDate\n            ? `\n        <p class=\"film__date\">| ${new Date(filmDate).getFullYear()}</p>\n        `\n            : ''\n        } \n   \n    </li>\n    `;\n      }\n    )\n    .join('');\n}\n","import axios from 'axios';\nimport { API_KEY, BASE_URL } from './films-service';\n\nasync function fetchMovieGenres() {\n  try {\n    const url = `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`;\n    const response = await axios.get(url);\n    return response.data.genres.reduce((acc, currentValue) => {\n      acc[currentValue.id] = currentValue.name;\n\n      return acc;\n    }, {});\n  } catch (error) {\n    alert('ERRORgenres');\n  }\n}\n\nasync function fetchTvGenres() {\n  try {\n    const url = `${BASE_URL}/genre/tv/list?api_key=${API_KEY}&language=en-US`;\n    const response = await axios.get(url);\n    return response.data.genres.reduce((acc, currentValue) => {\n      acc[currentValue.id] = currentValue.name;\n\n      return acc;\n    }, {});\n  } catch (error) {\n    alert('ERRORTvgenres');\n  }\n}\n\nexport async function combineGenres() {\n  const movieGenres = await fetchMovieGenres();\n  const tvGenres = await fetchTvGenres();\n  const genres = { ...movieGenres, ...tvGenres };\n  return genres;\n}\n","import { getRefs } from './get-refs';\nconst refs = getRefs();\n\nconst btnUp = {\n  el: refs.btnUp,\n  show() {\n    this.el.classList.remove('btn-up_hide');\n  },\n  hide() {\n    this.el.classList.add('btn-up_hide');\n  },\n\n  addEventListener() {\n    window.addEventListener('scroll', () => {\n      const scrollY = window.scrollY || document.documentElement.scrollTop;\n      scrollY > 900 ? this.show() : this.hide();\n    });\n    document.querySelector('.btn-up').onclick = () => {\n      window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    };\n  },\n};\n\nbtnUp.addEventListener();\n"],"names":["$bpxeT","parcelRequire","$5274eb74605a1106$var$refs","getRefs","$5274eb74605a1106$export$4c07ddf2d98a14f0","videos","ref","trailer","find","video","name","watchBtn","classList","add","trailerOverlay","insertVideoCont","insertAdjacentHTML","key","site","concat","$5274eb74605a1106$var$videoTpl","$5274eb74605a1106$export$3949c78fa34dc1d0","$5274eb74605a1106$var$_showVideo","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","trailerBox","setAttribute","closeVideoBtn","removeAttribute","scrollIntoView","$5274eb74605a1106$export$add73491473b3471","document","querySelectorAll","forEach","v","src","pause","remove","addEventListener","$69a458246719d1c7$var$posterLargeUrl","$69a458246719d1c7$var$refs","$3vKGz","$69a458246719d1c7$export$605b145a07818080","movie","insertImgCont","ref1","length","original_title","poster_path","backdrop_path","moviePoster","$69a458246719d1c7$export$a30ef51ab559b8","movieBox","title","original_name","popularity","genres","vote_average","vote_count","overview","id","movieTitle","movieGenres","map","genre","toFixed","join","$69a458246719d1c7$export$d3af4656dcd9770b","querySelector","style","display","$69a458246719d1c7$var$_onMovieCardClick","e","movieCard","movieCardIdRef","movieId","preventDefault","target","contains","innerHTML","$b8f9b7833fa37166$export$57f8c9967d0d81f3","fetchMovie","_ctx","sent","modalBackdrop","window","$69a458246719d1c7$var$onEscPress","fetchMovieVideo","$69a458246719d1c7$var$onMovieModalClose","removeEventListener","addToWatched","textContent","addToQueue","code","currentTarget","filmGallery","modalCloseBtn","$57d87adc78ec6cca$export$188cb65847573555","param1","genresDict","results","param","release_date","first_air_date","genre_ids","poster","id1","filmTitle","filmDate","Date","getFullYear","$fab5075d8cb83450$var$fetchMovieGenres","$fab5075d8cb83450$var$_fetchMovieGenres","url","response","$8Mjv6","BASE_URL","API_KEY","$dIxxU","default","get","data","reduce","acc","currentValue","alert","$fab5075d8cb83450$var$fetchTvGenres","$fab5075d8cb83450$var$_fetchTvGenres","$fab5075d8cb83450$export$1598e1643bb93e96","$fab5075d8cb83450$var$_combineGenres","tvGenres","$dDDEV","$49fc2524958c817c$var$refs","$49fc2524958c817c$var$filmsApiService","FilmsApiService","$49fc2524958c817c$var$_onSearch","form","filmOnSearch","query","elements","search","value","trim","$49fc2524958c817c$var$onError","fetchFilmsOnSearch","$49fc2524958c817c$var$clearGalleryContainer","$49fc2524958c817c$var$renderFilmGallery","reset","console","log","films","searchForm","el","btnUp","show","hide","scrollY","documentElement","scrollTop","_this","onclick","scrollTo","top","left","behavior","$b8f9b7833fa37166$var$refs","$b8f9b7833fa37166$var$renderFilmGallery","$b8f9b7833fa37166$var$_load","fetchFilmsTrending","$b8f9b7833fa37166$var$load"],"version":3,"file":"index.5a148955.js.map"}