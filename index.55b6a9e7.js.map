{"mappings":"oeAAAA,EAAA,S,kECAA,IAAAC,EAAAD,EAAA,S,2FASA,MAAME,GAAO,EAAAD,EAAAE,WACPC,EAAkB,IAAI,EAAAC,EAAAC,iB,iBA4E5B,SAASC,IACPL,EAAKM,gBAAgBC,UAAY,E,CAvEnCP,EAAKQ,WAAWC,iBAAiB,UA2BjCC,eAA8BC,GAC5BA,EAAEC,iBACF,MAAMC,EAAOF,EAAEG,OAIf,GAFAZ,EAAgBa,MAAQJ,EAAEG,OAAOE,OAAOC,MAAMC,OAEhB,KAA1BhB,EAAgBa,MAGlB,YADAf,EAAKmB,iBAAiBC,UAAUC,OAAO,UAQzC,WAJ2BnB,EAAgBoB,mBACzCpB,EAAgBa,SAGCQ,SAASC,OAI1B,YAFAxB,EAAKmB,iBAAiBC,UAAUC,OAAO,UAsBzCrB,EAAKyB,YAAYlB,UAAY,IAf7B,EAAAmB,EAAAC,+BAA8BzB,EAAgBa,OAC9Ca,SAASC,cAAc,YAAYT,UAAUU,IAAI,UACjDjB,EAAKkB,O,IApDP/B,EAAKgC,KAAKvB,iBAAiB,SAwE3B,SAAoBE,GACS,uBAAvBA,EAAEG,OAAOmB,YACXjC,EAAKM,gBAAgBC,UAAY,G,IAvErCP,EAAKQ,WAAWC,iBACd,QACAyB,GAGFxB,eAA6BC,GAC3BX,EAAKmB,iBAAiBC,UAAUU,IAAI,UACpC5B,EAAgBa,MAAQJ,EAAEG,OAAOG,MAAMC,OACvCb,IACA,MAAM8B,QAAqBjC,EAAgBoB,mBACzCpB,EAAgBa,OAElB,IAAKoB,GAAcZ,SAASC,OAG1B,YAFAnB,IAwC0B+B,EAnCPD,EAoCrBnC,EAAKM,gBAAgB+B,mBAAmB,aAAa,EAAAC,EAAAC,cAAaH,IAClER,SACGY,iBAAiB,2BACjBC,SAAQC,GAAQA,EAAKjC,iBAAiB,QAASkC,EAAAC,oBAJpD,IAA8BR,C,GA5DP,M,0DDGvB,G,cAAAS","sources":["src/index.js","src/js/search-movie.js"],"sourcesContent":["import './js/modal-team';\nimport './js/glide';\nimport './js/addvideo';\nimport './js/firebase-auth';\nimport './js/firebase-db-index';\nimport './js/firebase-class';\nimport './js/movie-card';\nimport './js/search-movie';\nimport './js/change-color-scheme';\nimport './js/library-auth';\nimport './js/backToTop';\nimport './js/pagination';\nimport './js/sticky-header';\n// import './js/header-for-tab&mob';\n\nimport { getPaginationFromMainRequest } from './js/pagination';\n//запуск пагінації головної сторінки\ngetPaginationFromMainRequest();\n","import { getRefs } from './get-refs';\nimport { FilmsApiService } from './films-service';\nimport { filmTpl } from './films-gallery';\nimport { filmShortTpl } from './films-gallery';\nimport { combineGenres } from './get-genres';\nimport { onMovieCardClick } from './movie-card';\nimport { getPaginationFromSerchRequest } from './pagination';\nimport Notiflix from 'notiflix';\n\nconst refs = getRefs();\nconst filmsApiService = new FilmsApiService();\n\nconst debounce = require('debounce');\n\nconst DEBOUNCE_DELAY = 300;\n\nrefs.searchForm.addEventListener('submit', onSearchSubmit);\n\nrefs.body.addEventListener('click', inputClose);\n\n//Input Search\nrefs.searchForm.addEventListener(\n  'input',\n  debounce(onSearchInput, DEBOUNCE_DELAY)\n);\n\nasync function onSearchInput(e) {\n  refs.spanNotification.classList.add('hidden');\n  filmsApiService.query = e.target.value.trim();\n  clearSearchList();\n  const filmOnSearch = await filmsApiService.fetchFilmsOnSearch(\n    filmsApiService.query\n  );\n  if (!filmOnSearch?.results?.length) {\n    clearSearchList();\n    // Notiflix.Notify.failure('Sorry, film is not found');\n    return;\n  }\n\n  renderFilmSearchList(filmOnSearch);\n}\n\n//Submit search\nasync function onSearchSubmit(e) {\n  e.preventDefault();\n  const form = e.target;\n\n  filmsApiService.query = e.target.search.value.trim();\n\n  if (filmsApiService.query === '') {\n    // Notiflix.Notify.failure('Please type something');\n    refs.spanNotification.classList.remove('hidden');\n    return;\n  }\n\n  const filmOnSearch = await filmsApiService.fetchFilmsOnSearch(\n    filmsApiService.query\n  );\n\n  if (!filmOnSearch?.results?.length) {\n    // Notiflix.Notify.failure('Sorry, film is not found');\n    refs.spanNotification.classList.remove('hidden');\n\n    return;\n  }\n\n  clearGalleryContainer();\n\n  getPaginationFromSerchRequest(filmsApiService.query);\n  document.querySelector('.spinner').classList.add('hidden');\n  form.reset();\n}\n\n//render markup\nfunction renderFilmSearchList(films) {\n  refs.searchQueryList.insertAdjacentHTML('beforeend', filmShortTpl(films));\n  document\n    .querySelectorAll('.header__form-list-item')\n    .forEach(node => node.addEventListener('click', onMovieCardClick));\n}\n\n//clear markup\nfunction clearGalleryContainer() {\n  refs.filmGallery.innerHTML = '';\n}\n\nfunction clearSearchList() {\n  refs.searchQueryList.innerHTML = '';\n}\n\nfunction inputClose(e) {\n  if (e.target.className !== 'header__form-input')\n    refs.searchQueryList.innerHTML = '';\n}\n"],"names":["parcelRequire","$lpPzL","$71009b01fa8718e8$var$refs","getRefs","$71009b01fa8718e8$var$filmsApiService","$cQLOM","FilmsApiService","$71009b01fa8718e8$var$clearSearchList","searchQueryList","innerHTML","searchForm","addEventListener","async","e","preventDefault","form","target","query","search","value","trim","spanNotification","classList","remove","fetchFilmsOnSearch","results","length","filmGallery","$2nhTy","getPaginationFromSerchRequest","document","querySelector","add","reset","body","className","$b6yhC","filmOnSearch","films","insertAdjacentHTML","$kcNsB","filmShortTpl","querySelectorAll","forEach","node","$03v4M","onMovieCardClick","getPaginationFromMainRequest"],"version":3,"file":"index.55b6a9e7.js.map"}