{"mappings":"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","sources":["src/my-library.js","src/js/firebase-db-library.js","src/js/library-gallery.js","src/js/firebase-movie-status-library.js"],"sourcesContent":["import './js/firebase-auth';\nimport './js/firebase-class';\nimport './js/firebase-db-index';\nimport './js/firebase-db-library';\nimport './js/firebase-movie-status-library';\nimport './js/change-color-scheme.js';\nimport './js/modal-team';\n","import { Firebase } from './firebase-class';\nimport { getRefs } from './get-refs';\nimport { renderLibrary } from './library-gallery';\nconst refs = getRefs();\n\nconst firebase = new Firebase();\n\nrefs.watched.addEventListener('click', showWatched);\nrefs.queue.addEventListener('click', showQueue);\n\nasync function showWatched() {\n  refs.queue.classList.remove('film-btn--active');\n  refs.watched.classList.add('film-btn--active');\n\n  let watched = await firebase.getDoc('watched');\n  if (watched.length === 0) {\n    refs.filmGallery.innerHTML = '';\n    refs.filmGallery.insertAdjacentHTML(\n      'beforeend',\n      `<li class=\"film__list-error\">\n      <p class=\"library__text\">No watched movies found in the library</p>\n      <img src=\"https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png\" alt=\"No watched movies found in the library\"/>\n    </li>`\n    );\n  } else {\n    refs.filmGallery.innerHTML = '';\n    renderLibrary(watched);\n  }\n}\n\nasync function showQueue() {\n  refs.watched.classList.remove('film-btn--active');\n  refs.queue.classList.add('film-btn--active');\n\n  let queue = await firebase.getDoc('queue');\n\n  if (queue.length === 0) {\n    refs.filmGallery.innerHTML = '';\n    refs.filmGallery.insertAdjacentHTML(\n      'beforeend',\n      `<li class=\"film__list-error\">\n        <p class=\"library__text\">No movies saved for viewing were found in the library</p>\n        <img src=\"https://nejdancs.github.io/filmoteka/cat__1.21cb105d.png\" alt=\"No movies saved for viewing were found in the library\"/>\n      </li>`\n    );\n  } else {\n    refs.filmGallery.innerHTML = '';\n    renderLibrary(queue);\n  }\n}\nconst qwe = setInterval(getUserStatus, 250);\n\nfunction getUserStatus(params) {\n  try {\n    refs.watched.classList.add('film-btn--active');\n    firebase.userStatus();\n    showWatched();\n    clearInterval(qwe);\n  } catch (error) {\n    console.log('error');\n  }\n}\n","import { FilmsApiService } from './films-service';\nexport const filmsApiService = new FilmsApiService();\nimport { getRefs } from './get-refs';\n// import { renderVideoBox } from './addvideo';\n\nconst refs = getRefs();\nconst posterLargeUrl = 'https://image.tmdb.org/t/p/original';\n\nexport function renderLibrary(filmsIds) {\n  return filmsIds.map(renderMovieCardLib).join('');\n}\n\nrefs.filmGallery.addEventListener('click', onMovieCardClick);\n\nasync function renderMovieCardLib(movieId) {\n  const movie = await filmsApiService.fetchMovie(movieId);\n  const poster = getPosterForLibCard(movie);\n  const markup = movieTplLib(movie, poster);\n  refs.filmGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction getPosterForLibCard({ poster_path, backdrop_path } = {}) {\n  const moviePoster = poster_path ?? backdrop_path ?? '';\n  const imgUrl = `${posterLargeUrl}${moviePoster}`;\n  return imgUrl;\n}\n\nfunction movieTplLib(movie, poster) {\n  const {\n    original_name,\n    original_title,\n    genres,\n    vote_average,\n    release_date,\n    id,\n  } = movie;\n\n  const movieTitle = original_name ?? original_title ?? '';\n  const movieGenres = genres ? genres.map(genre => genre.name) : '';\n\n  return ` <li   class=\"film__item\">\n    \n        <a class=\"film__link\"\n        href=\"#\"\n        >\n          <img id='${id}'\n            class=\"film__image\"\n            ${\n              poster\n                ? `\n        src=\"${poster}\"\n        `\n                : `src = ''`\n            }\n                        alt=\"Movie: ${movieTitle}\"\n            loading=\"lazy\"\n          />\n        </a>\n      </div>\n      <div class=\"film__info\">\n      <p class=\"film__info--text\">Watch ${movieTitle} online</p>\n      </div>\n      <div class=\"film__content\">\n        ${\n          movieTitle\n            ? `\n        <h3 class=\"film__film__title\">\n          ${movieTitle}</h3>\n        `\n            : ''\n        } ${\n    movieGenres\n      ? `\n        <p class=\"film__genres\">${movieGenres.join(', ')}\n        </p>\n        `\n      : ''\n  } \n        \n        ${\n          release_date\n            ? `\n        <p class=\"film__date\">| ${new Date(release_date).getFullYear()}</p>\n        `\n            : ''\n        } \n        ${\n          vote_average\n            ? `\n        <p class=\"film__value\">${vote_average.toFixed(2)}</p>\n        `\n            : ''\n        }\n   \n    </li>\n    `;\n}\nconst backdrop = document.querySelector('.backdrop');\nbackdrop.addEventListener('click', backdropClick);\n\nfunction renderMovieCard(movie) {\n  refs.insertImgCont.insertAdjacentHTML('beforeend', getPosterForCard(movie));\n  refs.movieBox.insertAdjacentHTML('beforeend', movieCardTpl(movie));\n  //   document.querySelector('.spinner').style.display = 'none';\n}\nexport function movieCardTpl(movie) {\n  const {\n    title,\n    original_name,\n    original_title,\n    popularity,\n    genres,\n    vote_average,\n    vote_count,\n    overview,\n    id,\n    video,\n  } = movie;\n\n  const movieTitle = original_name ?? original_title ?? '';\n  const movieGenres = genres ? genres.map(genre => genre.name) : '';\n\n  return `\n  <div class=\"img-box\"></div>\n  <div class=\"movie__id\" id=\"${id}\" ><h2 class=\"movie-card__title\">\n    ${title ?? movieTitle}\n    </h2>\n  <div class=\"movie__info-container\">\n<table class=\"movie-info__table\">\n  <tr>\n    ${\n      vote_count\n        ? `\n            <td class=\"movie__info-item\">Vote / Votes</td>\n        `\n        : ''\n    }\n    ${\n      vote_count\n        ? `\n            <td class=\"movie__info-data\"><span class=\"td-box\">${vote_average.toFixed(\n              1\n            )}</span> / ${vote_count}</td>\n        `\n        : ''\n    }\n    \n  </tr>\n  <tr>\n    ${\n      popularity\n        ? `\n            <td class=\"movie__info-item\">Popularity</td>\n        `\n        : ''\n    }\n    ${\n      popularity\n        ? `\n            <td class=\"movie__info-data\">${popularity.toFixed(1)}</td>\n        `\n        : ''\n    }\n  </tr>\n  <tr>\n     ${\n       movieTitle\n         ? `\n                <td class=\"movie__info-item\">Original Title</td>\n        `\n         : ''\n     }\n    ${\n      movieTitle\n        ? `\n                <td class=\"movie__info-data movie__info-data--title\">${movieTitle}</td>\n        `\n        : ''\n    }\n  </tr>\n    <tr>\n    ${movieGenres ? `<td class=\"movie__info-item\">Genre</td>` : ''}\n    ${\n      movieGenres\n        ? `<td class=\"movie__info-data\">${movieGenres.join(', ')}</td>`\n        : ''\n    }\n  </tr>\n</table>\n</div>\n${\n  overview\n    ? `\n    <h3 class=\"movie__about\">About</h3> `\n    : ''\n}\n${\n  overview\n    ? `\n    <p class=\"movie__about-info\">${overview}</p> `\n    : ''\n}\n</div>`;\n}\n\nexport function getPosterForCard({\n  original_title,\n  poster_path,\n  backdrop_path,\n} = {}) {\n  const moviePoster = poster_path ?? backdrop_path ?? '';\n  return `\n             <img\n            class=\"movie__poster\"\n            ${\n              moviePoster\n                ? `\n        src=\"${posterLargeUrl}${moviePoster}\"\n        `\n                : `src = ''`\n            }\n                        alt=\"Movie: ${original_title ?? ''}\"\n          />\n`;\n}\n\nrefs.filmGallery.addEventListener('click', onMovieCardClick);\n\nexport async function onMovieCardClick(e) {\n  e.preventDefault();\n\n  if (!e.target.classList.contains('film__image')) {\n    return;\n  }\n\n  refs.insertImgCont.innerHTML = '';\n  refs.movieBox.innerHTML = '';\n  refs.watchBtn.classList.remove('not-active');\n\n  const movieCard = await filmsApiService.fetchMovie(e.target.id);\n  if (!movieCard) {\n    return;\n    // Вивести повідомлення про помилку!!!!\n  }\n\n  refs.modalBackdrop.classList.remove('is-hidden');\n  window.addEventListener('keydown', onEscPress);\n  document.querySelector('body').classList.add('modal-open');\n  renderMovieCard(movieCard);\n  const movieCardIdRef = document.querySelector('.movie__id');\n  const movieId = movieCardIdRef.id;\n  const videos = await filmsApiService.fetchMovieVideo(movieId);\n  renderVideoBox(videos);\n}\n\nrefs.modalCloseBtn.addEventListener('click', onMovieModalClose);\n\nfunction onMovieModalClose(e) {\n  refs.trailerOverlay.classList.remove('not-active');\n\n  refs.modalBackdrop.classList.add('is-hidden');\n  window.removeEventListener('keydown', onEscPress);\n  closeVideo();\n  document.querySelector('body').classList.remove('modal-open');\n  refs.insertVideoCont.innerHTML = ' ';\n\n  refs.addToWatched.textContent = 'add to watched';\n  refs.addToWatched.classList.remove('film-btn--active');\n  refs.addToQueue.textContent = 'add to queue';\n  refs.addToQueue.classList.remove('film-btn--active');\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    onMovieModalClose();\n  }\n}\n\nfunction backdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onMovieModalClose();\n  }\n}\n\nconst stopVideos = () => {\n  document.querySelectorAll('iframe').forEach(v => {\n    v.src = v.src;\n  });\n  document.querySelectorAll('video').forEach(v => {\n    v.pause();\n  });\n};\n\nrefs.trailerOverlay.addEventListener('click', showVideo);\nrefs.closeVideoBtn.addEventListener('click', closeVideo);\nrefs.watchBtn.addEventListener('click', showVideo);\n\nfunction videoTpl(trailer) {\n  const { key, site } = trailer;\n\n  return `<iframe class=\"iframe\" width=\"100%\" height=\"100%\" src=\"https://www.${site}.com/embed/${key}?origin=https://asyrotenko.github.io\" title=\"video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media;\n    gyroscope; picture-in-picture\" allowfullscreen></iframe>`;\n}\n\nexport function renderVideoBox(videos) {\n  const trailer = videos.find(video => video.name === 'Official Trailer' ?? {});\n  if (!trailer) {\n    refs.watchBtn.classList.add('not-active');\n    refs.trailerOverlay.classList.add('not-active');\n    return;\n  }\n  refs.insertVideoCont.insertAdjacentHTML('beforeend', videoTpl(trailer));\n}\n\nexport async function showVideo() {\n  refs.insertVideoCont.classList.add('is-active');\n  refs.trailerBox.classList.add('is-active');\n  refs.watchBtn.setAttribute('disabled', ' ');\n  refs.closeVideoBtn.removeAttribute('disabled');\n  refs.insertVideoCont.scrollIntoView();\n}\n\nexport function closeVideo() {\n  stopVideos();\n  refs.insertVideoCont.classList.remove('is-active');\n  refs.trailerBox.classList.remove('is-active');\n  refs.closeVideoBtn.setAttribute('disabled', '');\n  refs.watchBtn.removeAttribute('disabled');\n}\n","import { Firebase, auth } from './firebase-class';\nimport { getRefs } from './get-refs';\n\nconst refs = getRefs();\n\nconst firebase = new Firebase();\n\nrefs.addToWatched.addEventListener('click', pullToWatched);\nrefs.addToQueue.addEventListener('click', pullToQueue);\nrefs.filmGallery.addEventListener('click', getMovieStatus);\n\nasync function getMovieStatus(e) {\n  const textContentRemoveWatched = 'remove from watched';\n  const watchedMovies = await firebase.getDoc('watched');\n  const watchedMoviesId = Object.values(watchedMovies);\n  const currentWatchedMovieStatus = watchedMoviesId.includes(e.target.id);\n\n  if (currentWatchedMovieStatus) {\n    refs.addToWatched.textContent = textContentRemoveWatched;\n    refs.addToWatched.classList.add('film-btn--active');\n  }\n\n  const textContentRemoveQueue = 'remove from queue';\n  const queueMovies = await firebase.getDoc('queue');\n  const queueMoviesId = Object.values(queueMovies);\n  const currentQueueMovieStatus = queueMoviesId.includes(e.target.id);\n\n  if (currentQueueMovieStatus) {\n    refs.addToQueue.textContent = textContentRemoveQueue;\n    refs.addToQueue.classList.add('film-btn--active');\n  }\n}\n\nfunction pullToWatched(e) {\n  const textContentAdd = 'add to watched';\n  const textContentRemove = 'remove from watched';\n  console.log(firebase.setDoc.userId);\n  if (e.target.textContent.includes(textContentAdd)) {\n    e.target.textContent = textContentRemove;\n    firebase.setDoc('watched');\n    firebase.removeFilmById('queue');\n    refs.addToQueue.textContent = 'add to queue';\n    refs.addToQueue.classList.remove('film-btn--active');\n  } else if (e.target.textContent.includes(textContentRemove)) {\n    e.target.textContent = textContentAdd;\n    firebase.removeFilmById('watched');\n    refs.addToWatched.classList.remove('film-btn--active');\n  }\n}\n\nfunction pullToQueue(e) {\n  const textContentAdd = 'add to queue';\n  const textContentRemove = 'remove from queue';\n  if (e.target.textContent.includes(textContentAdd)) {\n    e.target.textContent = textContentRemove;\n    firebase.setDoc('queue');\n    firebase.removeFilmById('watched');\n    refs.addToWatched.textContent = 'add to watched';\n    refs.addToWatched.classList.remove('film-btn--active');\n  } else if (e.target.textContent.includes(textContentRemove)) {\n    e.target.textContent = textContentAdd;\n    firebase.removeFilmById('queue');\n    refs.addToQueue.classList.remove('film-btn--active');\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$b587c25746a4650e$export$57f8c9967d0d81f3","$8Mjv6","FilmsApiService","$b587c25746a4650e$var$refs","$3vKGz","getRefs","$b587c25746a4650e$var$posterLargeUrl","$b587c25746a4650e$export$e7d1a4959038c5e5","filmsIds","map","$b587c25746a4650e$var$renderMovieCardLib","join","movieId","$b587c25746a4650e$var$_renderMovieCardLib","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","movie","poster","markup","fetchMovie","_ctx","sent","$b587c25746a4650e$var$getPosterForLibCard","$b587c25746a4650e$var$movieTplLib","filmGallery","insertAdjacentHTML","ref1","ref","length","poster_path","backdrop_path","moviePoster","imgUrl","concat","original_name","original_title","genres","vote_average","release_date","id","movieTitle","movieGenres","genre","name","Date","getFullYear","toFixed","$b587c25746a4650e$var$renderMovieCard","insertImgCont","ref2","$b587c25746a4650e$export$a30ef51ab559b8","movieBox","title","popularity","vote_count","overview","video","$b587c25746a4650e$export$d3af4656dcd9770b","$b587c25746a4650e$export$2d08c7f0d0e4b2d5","e","$b587c25746a4650e$var$_onMovieCardClick","movieCard","movieCardIdRef","preventDefault","target","classList","contains","innerHTML","watchBtn","remove","modalBackdrop","window","addEventListener","$b587c25746a4650e$var$onEscPress","document","querySelector","add","fetchMovieVideo","$b587c25746a4650e$export$4c07ddf2d98a14f0","$b587c25746a4650e$var$onMovieModalClose","trailerOverlay","removeEventListener","$b587c25746a4650e$export$add73491473b3471","insertVideoCont","addToWatched","textContent","addToQueue","code","currentTarget","modalCloseBtn","videos","trailer","find","key","site","$b587c25746a4650e$var$videoTpl","$b587c25746a4650e$export$3949c78fa34dc1d0","$b587c25746a4650e$var$_showVideo","trailerBox","setAttribute","closeVideoBtn","removeAttribute","scrollIntoView","querySelectorAll","forEach","v","src","pause","$b7e35614679cd5d5$var$refs","$b7e35614679cd5d5$var$firebase","$iGaYn","Firebase","$b7e35614679cd5d5$var$showWatched","$b7e35614679cd5d5$var$_showWatched","watched","queue","getDoc","$b7e35614679cd5d5$var$_showQueue","$b7e35614679cd5d5$var$qwe","setInterval","params","userStatus","clearInterval","error","console","log","$aa1b541dfdf442f7$var$refs","$aa1b541dfdf442f7$var$firebase","$aa1b541dfdf442f7$var$_getMovieStatus","textContentRemoveWatched","watchedMovies","watchedMoviesId","textContentRemoveQueue","queueMovies","queueMoviesId","Object","values","includes","textContentAdd","textContentRemove","setDoc","userId","removeFilmById"],"version":3,"file":"my-library.63412b13.js.map"}