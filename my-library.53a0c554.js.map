{"mappings":"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","sources":["src/my-library.js","src/js/firebase-db-library.js","src/js/library-gallery.js"],"sourcesContent":["import './js/firebase-auth';\nimport './js/firebase-class';\nimport './js/firebase-db-library';\nimport './js/change-color-scheme.js';\nimport './js/modal-team';\n// import './js/movie-card';\n\nimport { getRefs } from './js/get-refs';\nconst refs = getRefs();\n\n// function triggerBtnClick() {\n//   setTimeout(() => {\n//     refs.watched.click();\n//   }, 1000);\n// }\n// window.addEventListener('load', refs.watched.click());\n// window.addEventListener('load', refs.watched.classList.add('film-btn--active'));\n","import { Firebase } from './firebase-class';\nimport { getRefs } from './get-refs';\nimport { renderLibrary } from './library-gallery';\nconst refs = getRefs();\n\nconst firebase = new Firebase();\n\nrefs.watched.addEventListener('click', showWatched);\nrefs.queue.addEventListener('click', showQueue);\n\nasync function showWatched() {\n  let watched = await firebase.getDoc('watched');\n  if (watched.length === 0) {\n    console.log('ERROR');\n    refs.filmGallery.innerHTML = '';\n    refs.filmGallery.insertAdjacentHTML(\n      'beforeend',\n      `<li class=\"film__list-error\">\n      <p class=\"library__text\">В бібліотеці не знайдено переглянутих фільмів</p>\n      <img src=\"./images/library-cat.png\" alt=\"В бібліотеці не знайдено переглянутих фільмів\"/>\n    </li>`\n    );\n  } else {\n    refs.filmGallery.innerHTML = '';\n    renderLibrary(watched);\n    // console.log(watched);\n  }\n}\n\nasync function showQueue() {\n  refs.watched.classList.remove('film-btn--active');\n  let queue = await firebase.getDoc('queue');\n\n  if (queue.length === 0) {\n    console.log('ERROR');\n    refs.filmGallery.innerHTML = '';\n    refs.filmGallery.insertAdjacentHTML(\n      'beforeend',\n      `<li class=\"film__list-error\">\n        <p class=\"library__text\">В бібліотеці не знайдено збережених для перегляду фільмів</p>\n        <img src=\"./images/library-cat.png\" alt=\"В бібліотеці не знайдено збережених для перегляду фільмів\"/>\n      </li>`\n    );\n  } else {\n    refs.filmGallery.innerHTML = '';\n    renderLibrary(queue);\n    // console.log(queue);\n  }\n}\nconst qwe = setInterval(getUserStatus, 250);\n\nfunction getUserStatus(params) {\n  try {\n    refs.watched.classList.add('film-btn--active');\n    firebase.userStatus();\n    console.log('got id');\n    showWatched();\n    clearInterval(qwe);\n  } catch (error) {\n    console.log('error');\n  }\n}\n","import { FilmsApiService } from './films-service';\nexport const filmsApiService = new FilmsApiService();\nimport { getRefs } from './get-refs';\n\nconst refs = getRefs();\nconst posterLargeUrl = 'https://image.tmdb.org/t/p/original';\n\nexport function renderLibrary(filmsIds) {\n  return filmsIds.map(renderMovieCardLib).join('');\n}\n\nasync function renderMovieCardLib(movieId) {\n  const movie = await filmsApiService.fetchMovie(movieId);\n  const poster = getPosterForLibCard(movie);\n  const markup = movieTplLib(movie, poster);\n  refs.filmGallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction getPosterForLibCard({ poster_path, backdrop_path } = {}) {\n  const moviePoster = poster_path ?? backdrop_path ?? '';\n  const imgUrl = `${posterLargeUrl}${moviePoster}`;\n  return imgUrl;\n}\n\nfunction movieTplLib(movie, poster) {\n  const {\n    original_name,\n    original_title,\n    genres,\n    vote_average,\n    release_date,\n    id,\n  } = movie;\n\n  const movieTitle = original_name ?? original_title ?? '';\n  const movieGenres = genres ? genres.map(genre => genre.name) : '';\n\n  return ` <li   class=\"film__item\">\n    \n        <a class=\"film__link\"\n        href=\"#\"\n        >\n          <img id='${id}'\n            class=\"film__image\"\n            ${\n              poster\n                ? `\n        src=\"${poster}\"\n        `\n                : `src = ''`\n            }\n                        alt=\"Movie: ${movieTitle}\"\n            loading=\"lazy\"\n          />\n        </a>\n      </div>\n      <div class=\"film__info\">\n      <p class=\"film__info--text\">Watch ${movieTitle} online</p>\n      </div>\n      <div class=\"film__content\">\n        ${\n          movieTitle\n            ? `\n        <h3 class=\"film__film__title\">\n          ${movieTitle}</h3>\n        `\n            : ''\n        } ${\n    movieGenres\n      ? `\n        <p class=\"film__genres\">${movieGenres.join(', ')}\n        </p>\n        `\n      : ''\n  } \n        \n        ${\n          release_date\n            ? `\n        <p class=\"film__date\">| ${new Date(release_date).getFullYear()}</p>\n        `\n            : ''\n        } \n        ${\n          vote_average\n            ? `\n        <p class=\"film__value\">${vote_average.toFixed(2)}</p>\n        `\n            : ''\n        }\n   \n    </li>\n    `;\n}\n"],"names":["parcelRequire","$bpxeT","$b587c25746a4650e$export$57f8c9967d0d81f3","$8Mjv6","FilmsApiService","$b587c25746a4650e$var$refs","$3vKGz","getRefs","$b587c25746a4650e$var$posterLargeUrl","$b587c25746a4650e$export$e7d1a4959038c5e5","filmsIds","map","$b587c25746a4650e$var$renderMovieCardLib","join","movieId","$b587c25746a4650e$var$_renderMovieCardLib","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","movie","poster","markup","fetchMovie","_ctx","sent","$b587c25746a4650e$var$getPosterForLibCard","$b587c25746a4650e$var$movieTplLib","filmGallery","insertAdjacentHTML","ref1","ref","length","poster_path","backdrop_path","moviePoster","imgUrl","concat","original_name","original_title","genres","vote_average","release_date","id","movieTitle","movieGenres","genre","name","Date","getFullYear","toFixed","$b7e35614679cd5d5$var$refs","$b7e35614679cd5d5$var$firebase","$iGaYn","Firebase","$b7e35614679cd5d5$var$showWatched","$b7e35614679cd5d5$var$_showWatched","watched","getDoc","console","log","innerHTML","$b7e35614679cd5d5$var$_showQueue","queue","classList","remove","addEventListener","$b7e35614679cd5d5$var$qwe","setInterval","params","add","userStatus","clearInterval","error"],"version":3,"file":"my-library.53a0c554.js.map"}