{"mappings":"iiBAAAA,EAAA,S,kECAA,IAAAC,EAAAD,EAAA,S,qHASA,IAAME,GAAO,EAAAC,EAAAC,WACPC,EAAkB,IAAI,EAAAC,EAAAC,iB,sBAgBbC,I,OAAAA,EAAfC,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,EAA6BC,G,IAOtBC,EAHCC,E,yEAHNb,EAAKc,iBAAiBC,UAAUC,IAAI,UACpCb,EAAgBc,MAAQN,EAAEO,OAAOC,MAAMC,OACvCC,I,SAC2BlB,EAAgBmB,mBACzCnB,EAAgBc,O,UAEbJ,OAHCA,EAAYU,EAAAC,OAGQ,QAArBZ,EAAAC,EAAcY,eAAO,IAArBb,OAAA,EAAAA,EAAuBc,OAAF,C,uBACxBL,I,2BAKFM,EAAqBd,G,6CAbKe,MAAAC,KAAAC,U,UAiBbC,I,OAAAA,EAAfxB,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,EAA8BC,G,IAgBvBC,EAdCoB,EAUAnB,E,qEAXNF,EAAEsB,iBACID,EAAOrB,EAAEO,OAEff,EAAgBc,MAAQN,EAAEO,OAAOgB,OAAOf,MAAMC,OAEhB,KAA1BjB,EAAgBc,MAAY,C,sBAE9BjB,EAAKc,iBAAiBC,UAAUoB,OAAO,U,0CAIdhC,EAAgBmB,mBACzCnB,EAAgBc,O,UAGbJ,OAJCA,EAAYU,EAAAC,OAIQ,QAArBZ,EAAAC,EAAcY,eAAO,IAArBb,OAAA,EAAAA,EAAuBc,OAAF,C,uBAExB1B,EAAKc,iBAAiBC,UAAUoB,OAAO,U,2BAKzCC,KAEA,EAAAC,EAAAC,+BAA8BnC,EAAgBc,OAC9CsB,SAASC,cAAc,YAAYzB,UAAUC,IAAI,UACjDgB,EAAKS,Q,6CA3BsBb,MAAAC,KAAAC,U,CA+B7B,SAASH,EAAqBe,GAC5B1C,EAAK2C,gBAAgBC,mBAAmB,aAAa,EAAAC,EAAAC,cAAaJ,IAClEH,SACGQ,iBAAiB,2BACjBC,SAAQ,SAAAC,G,OAAQA,EAAKC,iBAAiB,QAASC,EAAAC,iB,IAIpD,SAAShB,IACPpC,EAAKqD,YAAYC,UAAY,E,CAG/B,SAASjC,IACPrB,EAAK2C,gBAAgBW,UAAY,E,CAvEnCtD,EAAKuD,WAAWL,iBAAiB,U,SA2BHvC,G,OAAfoB,EAAcH,MAAAC,KAAAC,U,IAzB7B9B,EAAKwD,KAAKN,iBAAiB,SAwE3B,SAAoBvC,GACS,uBAAvBA,EAAEO,OAAOuC,YACXzD,EAAK2C,gBAAgBW,UAAY,G,IAvErCtD,EAAKuD,WAAWL,iBACd,QACAQ,G,SAG2B/C,G,OAAdL,EAAasB,MAAAC,KAAAC,U,GAZL,M","sources":["src/index.js","src/js/search-movie.js"],"sourcesContent":["import './js/modal-team';\nimport './js/glide';\nimport './js/addvideo';\nimport './js/firebase-auth';\nimport './js/firebase-db-index';\nimport './js/firebase-class';\nimport './js/movie-card';\nimport './js/search-movie';\nimport './js/change-color-scheme';\nimport './js/library-auth';\nimport './js/backToTop';\nimport './js/pagination';\nimport './js/sticky-header';\n","import { getRefs } from './get-refs';\nimport { FilmsApiService } from './films-service';\nimport { filmTpl } from './films-gallery';\nimport { filmShortTpl } from './films-gallery';\nimport { combineGenres } from './get-genres';\nimport { onMovieCardClick } from './movie-card';\nimport { getPaginationFromSerchRequest } from './pagination';\nimport Notiflix from 'notiflix';\n\nconst refs = getRefs();\nconst filmsApiService = new FilmsApiService();\n\nconst debounce = require('debounce');\n\nconst DEBOUNCE_DELAY = 300;\n\nrefs.searchForm.addEventListener('submit', onSearchSubmit);\n\nrefs.body.addEventListener('click', inputClose);\n\n//Input Search\nrefs.searchForm.addEventListener(\n  'input',\n  debounce(onSearchInput, DEBOUNCE_DELAY)\n);\n\nasync function onSearchInput(e) {\n  refs.spanNotification.classList.add('hidden');\n  filmsApiService.query = e.target.value.trim();\n  clearSearchList();\n  const filmOnSearch = await filmsApiService.fetchFilmsOnSearch(\n    filmsApiService.query\n  );\n  if (!filmOnSearch?.results?.length) {\n    clearSearchList();\n    // Notiflix.Notify.failure('Sorry, film is not found');\n    return;\n  }\n\n  renderFilmSearchList(filmOnSearch);\n}\n\n//Submit search\nasync function onSearchSubmit(e) {\n  e.preventDefault();\n  const form = e.target;\n\n  filmsApiService.query = e.target.search.value.trim();\n\n  if (filmsApiService.query === '') {\n    // Notiflix.Notify.failure('Please type something');\n    refs.spanNotification.classList.remove('hidden');\n    return;\n  }\n\n  const filmOnSearch = await filmsApiService.fetchFilmsOnSearch(\n    filmsApiService.query\n  );\n\n  if (!filmOnSearch?.results?.length) {\n    // Notiflix.Notify.failure('Sorry, film is not found');\n    refs.spanNotification.classList.remove('hidden');\n\n    return;\n  }\n\n  clearGalleryContainer();\n\n  getPaginationFromSerchRequest(filmsApiService.query);\n  document.querySelector('.spinner').classList.add('hidden');\n  form.reset();\n}\n\n//render markup\nfunction renderFilmSearchList(films) {\n  refs.searchQueryList.insertAdjacentHTML('beforeend', filmShortTpl(films));\n  document\n    .querySelectorAll('.header__form-list-item')\n    .forEach(node => node.addEventListener('click', onMovieCardClick));\n}\n\n//clear markup\nfunction clearGalleryContainer() {\n  refs.filmGallery.innerHTML = '';\n}\n\nfunction clearSearchList() {\n  refs.searchQueryList.innerHTML = '';\n}\n\nfunction inputClose(e) {\n  if (e.target.className !== 'header__form-input')\n    refs.searchQueryList.innerHTML = '';\n}\n"],"names":["parcelRequire","$bpxeT","$49fc2524958c817c$var$refs","$3vKGz","getRefs","$49fc2524958c817c$var$filmsApiService","$8Mjv6","FilmsApiService","$49fc2524958c817c$var$_onSearchInput","$parcel$interopDefault","$2TvXO","mark","_callee","e","ref","filmOnSearch","spanNotification","classList","add","query","target","value","trim","$49fc2524958c817c$var$clearSearchList","fetchFilmsOnSearch","_ctx","sent","results","length","$49fc2524958c817c$var$renderFilmSearchList","apply","this","arguments","$49fc2524958c817c$var$_onSearchSubmit","form","preventDefault","search","remove","$49fc2524958c817c$var$clearGalleryContainer","$jcFG7","getPaginationFromSerchRequest","document","querySelector","reset","films","searchQueryList","insertAdjacentHTML","$7xBda","filmShortTpl","querySelectorAll","forEach","node","addEventListener","$94krt","onMovieCardClick","filmGallery","innerHTML","searchForm","body","className","$01B3o"],"version":3,"file":"index.b8e3440e.js.map"}